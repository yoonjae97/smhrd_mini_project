{% extends 'base.html' %}
{% block contents %}    


<div style="float: right; margin: 10px; padding: 5px; height: 70px;" class="logondiv">
            
    {% if userid %}
    <button style="float: right;" class="btns" onclick="location.href='/res/logout/'">로그아웃</button>
    <div class="logondiv" style="float: right; margin-right:10px;">
        <span>안녕하세요 {{ userid }} 님</span>
    </div>
    {% else %}
    <button style="float: right;" class="btns" onclick="location.href='/res/join/'" >회원가입</button>
    <button style="float: right; margin-top: 0px;" class="btns" form="logon">로그인</button>
    <form method='post' action="{% url 'res:logon' %}" id="logon" style="float: right;">
        {% csrf_token %}
        <label name="logonid">아이디</label>
        <input type="text" name="logonid">
        <label name="logonpw">비밀번호</label>
        <input type="password" name="logonpw">

    </form>
    {% endif %}
</div>
    
    


</div>
    
    <div class="container mt-3">
        <table class="eduList table table-striped">
            <colgroup>
                <col width="8%"/>
                <col width="35%"/>
                <col width="12%"/>
                <col width="8%"/>
                <col width="*%"/>
                <col width="8%"/>
            </colgroup>
            <thead>
                <tr style="text-align: center;">
                    <th>번호</th>
                    <th>학원명</th>
                    <th>작성자</th>
                    <th>평점</th>
                    <th>작성일</th>
                    <th>조회수</th>
                </tr>
            </thead>
            <tbody>
                {% for resItem in resList %}
                <tr style="text-align: center;">
                    <td>{{resItem.num}}</td>
                    <td><a href="/res/detail/{{resItem.res_seq}}/">{{resItem.res_name}}</a></td>
                    <td>{{resItem.mem_id}}</td>
                    <td>{{resItem.res_score}}</td>
                    <td>{{resItem.res_wdate}}</td>
                    <td>{{resItem.res_hit}}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    {% include "./paging.html" %}

    {% if userid %}
    <div class = "container mt-5" style = "text-align: right">    
        <div class="btn-group">
            <button type="button" class="btn btn-primary bg-secondary btn-outline-dark text-bg-dark " id="btnWrite">글쓰기</button>
            
        </div>
    </div>
    {% endif %}
    


    <script>

        function goPage(pg)
        {
          // 자바스크립트로 페이지 이동 - get방식으로 간단히 이동할 때
          location.href="/res/index/"+pg;
      
      
          // 이게 아닐 경우에는 form 태그 참조를 가져와서 사용한다
        }
      $(document).ready( () => {
        $("#btnWrite").click(() => {
          // 화살표 함수는 this 사용 못함
          $("#myform").prop("action", "/res/write");
          $("#myform").prop("method", "get");
          $("#myform").submit();
        });
      })
      </script>

{% endblock %}